var _ = require("lodash");
var __Counters = { "12rany6": { "id": "12rany6", "title": "Default counter", "count": 10, "kc9kqgti": { "id": "kc9kqgti", "title": "asdfs", "count": 0, "kc9kqkgu": { "id": "kc9kqkgu", "title": "sadfasdf", "count": 0, "kc9kqt5j": { "id": "kc9kqt5j", "title": "sadasgwefsadf", "count": 0, "kc9kqv13": { "id": "kc9kqv13", "title": "w4trgssergesrg", "count": 0, "kc9kqwsf": { "id": "kc9kqwsf", "title": "sbyer5bvtvservtgs", "count": 0, "kc9kqybi": { "id": "kc9kqybi", "title": "setbstgvsdfgvsdfg", "count": 0, "kc9kr3hy": { "id": "kc9kr3hy", "title": "asf sadf asdf sadfasdf asdf", "count": 0, "kc9ktuly": { "id": "kc9ktuly", "title": "sdflkjasdlfkjsafd", "count": 0, "kc9ktwfr": { "id": "kc9ktwfr", "title": "adlfjlajsdfhasdf", "count": 0 } } } } } } } } } }, "kc9kqgti": { "id": "kc9kqgti", "title": "asdfs", "count": 0, "kc9kqkgu": { "id": "kc9kqkgu", "title": "sadfasdf", "count": 0, "kc9kqt5j": { "id": "kc9kqt5j", "title": "sadasgwefsadf", "count": 0, "kc9kqv13": { "id": "kc9kqv13", "title": "w4trgssergesrg", "count": 0, "kc9kqwsf": { "id": "kc9kqwsf", "title": "sbyer5bvtvservtgs", "count": 0, "kc9kqybi": { "id": "kc9kqybi", "title": "setbstgvsdfgvsdfg", "count": 0, "kc9kr3hy": { "id": "kc9kr3hy", "title": "asf sadf asdf sadfasdf asdf", "count": 0, "kc9ktuly": { "id": "kc9ktuly", "title": "sdflkjasdlfkjsafd", "count": 0, "kc9ktwfr": { "id": "kc9ktwfr", "title": "adlfjlajsdfhasdf", "count": 0 } } } } } } } } }, "kc9kqkgu": { "id": "kc9kqkgu", "title": "sadfasdf", "count": 0, "kc9kqt5j": { "id": "kc9kqt5j", "title": "sadasgwefsadf", "count": 0, "kc9kqv13": { "id": "kc9kqv13", "title": "w4trgssergesrg", "count": 0, "kc9kqwsf": { "id": "kc9kqwsf", "title": "sbyer5bvtvservtgs", "count": 0, "kc9kqybi": { "id": "kc9kqybi", "title": "setbstgvsdfgvsdfg", "count": 0, "kc9kr3hy": { "id": "kc9kr3hy", "title": "asf sadf asdf sadfasdf asdf", "count": 0, "kc9ktuly": { "id": "kc9ktuly", "title": "sdflkjasdlfkjsafd", "count": 0, "kc9ktwfr": { "id": "kc9ktwfr", "title": "adlfjlajsdfhasdf", "count": 0 } } } } } } } }, "kc9kqt5j": { "id": "kc9kqt5j", "title": "sadasgwefsadf", "count": 0, "kc9kqv13": { "id": "kc9kqv13", "title": "w4trgssergesrg", "count": 0, "kc9kqwsf": { "id": "kc9kqwsf", "title": "sbyer5bvtvservtgs", "count": 0, "kc9kqybi": { "id": "kc9kqybi", "title": "setbstgvsdfgvsdfg", "count": 0, "kc9kr3hy": { "id": "kc9kr3hy", "title": "asf sadf asdf sadfasdf asdf", "count": 0, "kc9ktuly": { "id": "kc9ktuly", "title": "sdflkjasdlfkjsafd", "count": 0, "kc9ktwfr": { "id": "kc9ktwfr", "title": "adlfjlajsdfhasdf", "count": 0 } } } } } } }, "kc9kqv13": { "id": "kc9kqv13", "title": "w4trgssergesrg", "count": 0, "kc9kqwsf": { "id": "kc9kqwsf", "title": "sbyer5bvtvservtgs", "count": 0, "kc9kqybi": { "id": "kc9kqybi", "title": "setbstgvsdfgvsdfg", "count": 0, "kc9kr3hy": { "id": "kc9kr3hy", "title": "asf sadf asdf sadfasdf asdf", "count": 0, "kc9ktuly": { "id": "kc9ktuly", "title": "sdflkjasdlfkjsafd", "count": 0, "kc9ktwfr": { "id": "kc9ktwfr", "title": "adlfjlajsdfhasdf", "count": 0 } } } } } }, "kc9kqwsf": { "id": "kc9kqwsf", "title": "sbyer5bvtvservtgs", "count": 0, "kc9kqybi": { "id": "kc9kqybi", "title": "setbstgvsdfgvsdfg", "count": 0, "kc9kr3hy": { "id": "kc9kr3hy", "title": "asf sadf asdf sadfasdf asdf", "count": 0, "kc9ktuly": { "id": "kc9ktuly", "title": "sdflkjasdlfkjsafd", "count": 0, "kc9ktwfr": { "id": "kc9ktwfr", "title": "adlfjlajsdfhasdf", "count": 0 } } } } }, "kc9kqybi": { "id": "kc9kqybi", "title": "setbstgvsdfgvsdfg", "count": 0, "kc9kr3hy": { "id": "kc9kr3hy", "title": "asf sadf asdf sadfasdf asdf", "count": 0, "kc9ktuly": { "id": "kc9ktuly", "title": "sdflkjasdlfkjsafd", "count": 0, "kc9ktwfr": { "id": "kc9ktwfr", "title": "adlfjlajsdfhasdf", "count": 0 } } } }, "kc9kr3hy": { "id": "kc9kr3hy", "title": "asf sadf asdf sadfasdf asdf", "count": 0, "kc9ktuly": { "id": "kc9ktuly", "title": "sdflkjasdlfkjsafd", "count": 0, "kc9ktwfr": { "id": "kc9ktwfr", "title": "adlfjlajsdfhasdf", "count": 0 } } }, "kc9ktuly": { "id": "kc9ktuly", "title": "sdflkjasdlfkjsafd", "count": 0, "kc9ktwfr": { "id": "kc9ktwfr", "title": "adlfjlajsdfhasdf", "count": 0 } }, "kc9ktwfr": { "id": "kc9ktwfr", "title": "adlfjlajsdfhasdf", "count": 0 } }

module.exports = {
  all    : getAll,
  create : create,
  inc    : applyTo("count", inc),
  dec    : applyTo("count", dec),
  delete : del
};

function genId() {
  return (+new Date() + ~~(Math.random * 999999)).toString(36);
}

function getAll() { return _.map(__Counters, _.identity); }

function create(title) {
  var id = genId();
  __Counters[id] = {id: id, title: title, count: 0};
  return __Counters[id];
}

function del(id) {
  delete __Counters[id];
  return id;
}

function applyTo(key, fn) {
  return function(id) {
    __Counters[id][key] = fn(__Counters[id][key]);
    return __Counters[id];
  }
}

function inc(n) { return n + 1; }
function dec(n) { return n - 1; }
